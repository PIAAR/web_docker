{% extends "./layout.html" %}
{% block content %}
<div class="container top">
    <h1>RMI Stock Details Dashboard</h1>
</div>
<div class="container ">
    <div class="chart">
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
          <div id="tradingview_96716"></div>
          <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/{{ stock.exchange }}-{{ stock.stock_symbol}}/" rel="noopener" target="_blank"><span class="blue-text">{{ stock.stock_symbol}} Chart</span></a>RMI by TradingView</div>
          <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
          <script type="text/javascript">
          new TradingView.widget(
          {
          "width": 900,
          "height": "400",
          "symbol": "{{ stock.exchange }}:{{ stock.stock_symbol}}",
          "interval": "1",
          "timezone": "America/New_York",
          "theme": "dark",
          "style": "1",
          "locale": "en",
          "toolbar_bg": "#f1f3f6",
          "enable_publishing": false,
          "allow_symbol_change": true,
          "details": true,
          "container_id": "tradingview_96716"
        }
          );
          </script>
        </div>
        <!-- TradingView Widget END -->
    </div>
    <div class="container flex-item-left">
<h1><a href="/">Stock</a> >> <a href="#">Details</a> for {{ stock.company }} ({{ stock.stock_symbol }})</h1>
<h2>Details are sorted in decending order</h2>
<table class="content-table">
    <thead>
        <tr>
            <th>Date</th>
            <th>Open</th>
            <th>High</th>
            <th>Low</th>
            <th>Close</th>
            <th>Volume</th>
        </tr>
    </thead>
    <tbody>
        {% for bar in bars %}
        <tr>
            <td>{{ bar.date }}</td>
            <td>{{ bar.open }}</td>
            <td>{{ bar.high }}</td>
            <td>{{ bar.low }}</td>
            <td>{{ bar.close }}</td>
            <td>{{ bar.volume }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
        </div>
</div>
{% endblock %}